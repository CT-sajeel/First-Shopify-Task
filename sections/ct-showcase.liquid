{% schema %}
{
  "name": "Why Us Section",
  "tag": "section",
  "class": "why-us-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Why Us?"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Description",
      "default": "To create our natural skincare products, we ethically source the finest raw ingredients from around the world so you can be assured of the quality. Our proprietary formulas are easy to use and clinically proven to produce amazing results. Satisfaction guaranteed!"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "view"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    }
  ],
  "blocks": [
    {
      "type": "icon_block",
      "name": "Icon + Text",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon_image",
          "label": "Icon Image"
        },
        {
          "type": "text",
          "id": "icon_heading",
          "label": "Heading",
          "default": "Natural Ingredients"
        }
      ]
    },
    {
      "type": "text_image_block",
      "name": "Image With Text",
      "settings": [
        {
          "type": "image_picker",
          "id": "block_image",
          "label": "Background Image"
        },
        {
          "type": "text",
          "id": "block_heading",
          "label": "Heading",
          "default": "Proven Results"
        },
        {
          "type": "textarea",
          "id": "block_text",
          "label": "Text",
          "default": "You'll find exactly what you're looking for in our natural skincare products..."
        }
      ]
    }
  ],
  "max_blocks": 12,
  "presets": [
    {
      "name": "Why Us Section",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="why-us-wrapper">
  <div class="why-us-heading-container">
    <h2 class="why-us-title section-main-heading">{{ section.settings.heading }}</h2>
    <p class="why-us-description">{{ section.settings.subheading }}</p>
    {% if section.settings.button_text != blank and section.settings.button_link != blank %}
      <a href="{{ section.settings.button_link }}" class="why-us-button">
        {{ section.settings.button_text }}
      </a>
    {% endif %}
  </div>

  <div class="icon-blocks">
    {% for block in section.blocks %}
      {% if block.type == 'icon_block' %}
        <div class="icon-block">
          {% if block.settings.icon_image %}
           {{ block.settings.icon_image | image_url: width: 100 | image_tag: alt: block.settings.icon_heading }}
          {% endif %}
          <p>{{ block.settings.icon_heading }}</p>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div class="text-image-blocks desktop-grid">
    {% for block in section.blocks %}
      {% if block.type == 'text_image_block' %}
        <div class="text-image-block" style="background-image: url('{{ block.settings.block_image | image_url: width: 600 }}')">
          <div class="text-overlay">
            <h3>{{ block.settings.block_heading }}</h3>
            <p>{{ block.settings.block_text }}</p>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div class="text-image-slider mobile-carousel">
    {% for block in section.blocks %}
      {% if block.type == 'text_image_block' %}
        <div class="text-image-slide" style="background-image: url('{{ block.settings.block_image | image_url: width: 600 }}')">
          <div class="text-overlay">
            <h3>{{ block.settings.block_heading }}</h3>
            <p>{{ block.settings.block_text }}</p>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

<style>
.why-us-wrapper {
  padding: 40px 80px;
  text-align: center;
}

.why-us-title {
  margin-bottom: 10px;
}

.why-us-description {
  max-width: 700px;
  margin: 0 auto 30px;
  font-size: 16px;
  line-height: 1.6;
}

.why-us-button {
  display: inline-block;
  margin-top: 15px;
  padding: 10px 20px;
  background-color: black;
  color: white;
  text-decoration: none;
  border-radius: 4px;
}

.icon-blocks {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 30px;
  margin: 30px 0;
}

.icon-block {
  width: 120px;
  text-align: center;
}

.icon-block img {
  height: 50px;
  margin-bottom: 10px;
}

.text-image-blocks {
  display: none;
}

.text-image-slider {
  display: none;
}

.text-image-block, .text-image-slide {
  background-size: contain;
  background-position: center;
  color: black;
  padding: 20px;
  text-align: left;
  margin: 0px;
  position: relative;
  max-width: 90%;
  min-height: 240px;
}

.text-overlay {
  max-width: 100%;
  margin: 0 auto;
}

.text-overlay h3 {
  margin: 0 0 10px;
  font-size: 20px;
  font-weight: bold;
}

.text-overlay p {
  font-size: 15px;
  line-height: 1.5;
}

@media (min-width: 750px) {
  .desktop-grid {
    display: flex;
    justify-content: space-between;
    gap: 20px;
    flex-wrap: wrap;
    height: 398px;
  }

  .mobile-carousel {
    display: none;
  }

  .text-image-block {
    width: 30%;
  }
}

@media (max-width: 749px) {
  .why-us-wrapper {
  padding: 40px 15px;
  text-align: center;
}
  .desktop-grid {
    display: none;
  }

  .mobile-carousel {
    display: block;
  }

  .text-image-slide {
    width: 100%;
  }

  .text-image-slider {
    overflow-x: auto;
    display: flex;
    scroll-snap-type: x mandatory;
  }

  .text-image-slide {
    flex: 0 0 100%;
    scroll-snap-align: start;
  }
}
</style>
